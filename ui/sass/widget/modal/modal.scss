// Name:          Modal
//
// Description:   Define style for Modal Plugin
//
// TODO: 1. 宽度自适应的情况
//       2. 最大高度限制
//       3. 不同屏幕宽度下设置不同大小
//
// =============================================================================

// Modal Variables
// =============================================================================

$modal-bg-color: #f8f8f8;
$modal-btn-color: $global-primary;
$modal-btn-bg: $modal-bg-color;
$modal-btn-active-bg: #d4d4d4;
$modal-duration: 300ms;
$modal-border-color: #dedede;
$modal-border-radius: $global-radius;

$modal-actions-duration: $modal-duration;
$modal-actions-btn-bg: rgba(243, 243, 243, 0.95);
$modal-actions-active-btn-bg: #dcdcdc;

$modal-popup-duration: $modal-duration;

$modal-lg: 810px;
$modal-md: 540px;
$modal-sm: 270px;

/* ==========================================================================
   Component: Modal Plugin
 ============================================================================ */

.modal {
	width: $modal-sm;
	position: fixed;
	display: none;
	z-index: $z-index-modal;
	left: 50%;
	margin-left: -$modal-sm/2;
	margin-top: 0;
	top: 50%;
	text-align: center;
	border-radius: $modal-border-radius;
	opacity: 0;
	transform: translate3d(0, 0, 0) scale(1.185);
	transition-property: transform, opacity;

	&:focus {
		outline: 0;
	}

	&.modal-active {
		opacity: 1;
		transition-duration: $modal-duration;
		transform: translate3d(0, 0, 0) scale(1);
	}

	&.modal-out {
		opacity: 0;
		z-index: $z-index-modal - 1;
		transition-duration: $modal-duration;
		transform: translate3d(0, 0, 0) scale(0.815);
	}

	@media #{$medium-up} {
		width: $modal-md;
		margin-left: -$modal-md/2;
	}

	/*$media $large-up {
		width: $modal-lg;
		margin-left: -$modal-lg/2;
	  }*/
}

.modal-dialog {
	border-radius: $modal-border-radius;
	background: $modal-bg-color;
}

.modal-hd {
	padding: 15px 10px 5px 10px;
	font-size: 1.8rem;
	font-weight: 500;
	+ .modal-bd {
		padding-top: 0;
	}
	.close {
		position: absolute;
		top: 4px;
		right: 4px;
	}
}

.modal-bd {
	padding: 15px 10px;
	text-align: center;
	border-bottom: 1px solid $modal-border-color;
	border-radius: 2px 2px 0 0;
	// References https://github.com/allmobilize/amazeui/issues/464
	// overflow: hidden;

	+ .modal-bd {
		margin-top: 5px;
	}
}

// Prompt input
.modal-prompt-input {
	display: block;
	margin: 5px auto 0 auto;
	border-radius: $modal-border-radius;
	padding: 5px;
	line-height: 1.8rem;
	width: 80%;
	border: 1px solid $modal-border-color;
	-webkit-appearance: none;
	-moz-appearance: none;
	-ms-appearance: none;
	appearance: none;

	&:focus {
		outline: none;
		border-color: darken($modal-border-color, 3%);
	}
}

.modal-footer {
	height: 44px;
	overflow: hidden;
	display: table;
	width: 100%;
	border-collapse: collapse;
}

.modal-btn {
	display: table-cell !important;
	padding: 0 5px;
	height: 44px;
	box-sizing: border-box !important;
	font-size: 1.6rem;
	line-height: 44px;
	text-align: center;
	color: $global-primary;
	@include text-overflow(block);
	cursor: pointer;
	border-right: 1px solid $modal-border-color;

	&:first-child {
		border-radius: 0 0 0 $modal-border-radius;
	}

	&:last-child {
		border-right: none;
		border-radius: 0 0 $modal-border-radius 0;
	}

	&:first-child:last-child {
		border-radius: 0 0 $modal-border-radius $modal-border-radius;
	}

	&.modal-btn-bold {
		font-weight: 500;
	}

	&:active {
		background: $modal-btn-active-bg;
	}

	& + .modal-btn {
		border-left: 1px solid $modal-border-color;
	}

}

// without buttons
// -----------------------------------------------------------------------------

.modal-no-btn {
	.modal-dialog {
		border-radius: $global-radius;
		border-bottom: none;
	}

	.modal-bd {
		border-bottom: none;
	}

	.modal-footer {
		display: none;
	}

}

// Loading
// =============================================================================

.modal-loading {
	// width: $modal-sm !important;
	// margin-left: -$modal-sm/2 !important;

	.modal-bd {
		border-bottom: none;
	}

	.icon-spin {
		display: inline-block;
		font-size: 2.4rem;
	}

	.modal-footer {
		display: none;
	}

}

// Modal - Action
// ========================================================================

.modal-actions {
	position: fixed;
	left: 0;
	bottom: 0;
	z-index: $z-index-modal;
	width: 100%;
	text-align: center;
	border-radius: $modal-border-radius;
	transform: translateY(100%);
	transition: transform $modal-actions-duration;

	&.modal-active {
		transform: translateY(0);
	}

	&.modal-out {
		z-index: $z-index-modal - 1;
		transform: translateY(100%);
	}

}

.modal-actions-group {
	margin: 10px;
	.list {
		margin: 0;
		border-radius: $modal-border-radius;
		& > li {
			margin-bottom: 0;
			border-bottom: none;
			@include text-overflow();
			box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.015);
			& > a {
				padding: 1rem;
				@include text-overflow();
			}
			&:first-child {
				border-top: none;
				@include border-top-radius($modal-border-radius);
			}

			&:last-child {
				border-bottom: none;
				@include border-bottom-radius($modal-border-radius);
			}
		}
	}
}

.modal-actions-header {
	padding: 1rem;
	color: $gray-light;
	font-size: 1.4rem;
}

.modal-actions-danger {
	color: $global-danger;
	a {
		color: inherit;
	}
}

// Modal Popup
// ========================================================================

.popup {
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: $z-index-modal;
	background: #fff;
	display: none;
	overflow: hidden;
	transition-property: transform;
	transform: translateY(100%);

	&.modal-active,
	&.modal-out {
		transition-duration: $modal-popup-duration;
	}

	&.modal-active {
		transform: translateY(0);
	}

	&.modal-out {
		transform: translateY(100%);
	}

	// iPad Modal
	@media all and (min-width: 630px) and (min-height: 630px) {
		width: 630px;
		height: 630px;
		left: 50%;
		top: 50%;
		margin-left: -315px;
		margin-top: -315px;
		transform: translateY(1024px);

		&.modal-active {
			transform: translateY(0);
		}

		&.modal-out {
			transform: translateY(1024px);
		}
	}

}

.popup-inner {
	padding-top: 44px;
	height: 100%;
	@include scrollable();
}

.popup-hd {
	position: fixed;
	top: 0;
	width: 100%;
	height: 43px;
	border-bottom: 1px solid $modal-border-color;
	background-color: #fff;

	.popup-title {
		font-size: 1.8rem;
		font-weight: bold;
		line-height: 43px;

		text-align: center;
		margin: 0 30px;
		color: $gray-dark;
		@include text-overflow();
	}

	.close {
		position: absolute;
		right: 10px;
		top: 8px;
		cursor: pointer;
		transition: all 0.3s;
		color: $gray-light;

		&:hover {
			transform: rotate(360deg);
			color: $gray;
		}
	}

}

.popup-bd {
	padding: 15px;
	background: #f8f8f8;
	color: $gray;
}

